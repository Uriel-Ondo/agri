<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="application/vnd.hbbtv.xhtml+xml; charset=utf-8" />
    <title>Agri-Assist HbbTV</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="/static/css/fontawesome/all.min.css" />
    <link rel="stylesheet" href="/static/css/roboto/roboto.css" />
    <link rel="stylesheet" href="/static/css/styles.css" />
    <script src="/static/js/hls/hls.js"></script>
    <script src="/static/js/socketio/socket.io.min.js"></script>
</head>
<body onload="initApp();">
    <div class="app-container">
        <!-- Colonne de gauche - Quiz -->
        <div class="left-column">
            <div id="quiz-container" class="card card-float">
                <div class="card-header">
                    <h2><i class="fa-solid fa-tractor"></i> Quiz Agricole</h2>
                </div>
                <div class="card-body">
                    <p id="quiz-question" class="quiz-question"></p>
                    <ul id="quiz-options" class="quiz-options"></ul>
                    <p class="hbbtv-hint"><i class="fa-solid fa-circle" style="color: #00FF00;"></i> Utilisez le bouton vert pour sélectionner une réponse</p>
                </div>
            </div>
            <div id="qr-container" class="card card-float" style="display: none;">
                <div class="card-header">
                    <h2><i class="fa-solid fa-qrcode"></i> Rejoindre la session</h2>
                </div>
                <div class="card-body">
                    <img id="qr-code" src="" alt="QR Code" style="max-width: 100%;" />
                    <p class="hbbtv-hint">Scannez ce QR Code pour rejoindre la file d'attente ou cliquez sur le lien ci-dessous</p>
                    <a id="qr-link" href="#" target="_blank" style="display: block; margin-top: 10px; word-break: break-all;"></a>
                </div>
            </div>
        </div>
        <!-- Colonne centrale - Vidéo -->
        <div class="center-column">
            <div id="video-container" class="card card-float">
                <div class="card-header">
                    <h2><i class="fa-solid fa-video"></i> Agri-Assist Live</h2>
                </div>
                <div class="card-body">
                    <div class="video-wrapper">
                        <video id="video-player" controls="controls" autoplay="autoplay" muted="muted" class="video-player main-video" />
                        <div id="spectator-video-container" style="display: none;">
                            <div id="spectator-loading" class="loading-message">Veuillez patienter pendant le chargement du flux...</div>
                            <video id="spectator-video" controls="controls" autoplay="autoplay" muted="muted" class="video-player spectator-video" />
                        </div>
                    </div>
                    <button id="live-button" class="btn btn-primary btn-pulse" onclick="seekToLive()">
                        <i class="fa-solid fa-broadcast-tower"></i> Revenir en direct
                    </button>
                    <p class="hbbtv-hint"><i class="fa-solid fa-circle" style="color: #0000FF;"></i> Appuyez sur le bouton bleu pour revenir en direct</p>
                </div>
            </div>
            <div id="response" class="alert alert-info mt-3"></div>
        </div>
        <!-- Colonne de droite - Questions/Réponses -->
        <div class="right-column">
            <div id="question-form" class="card card-float">
                <div class="card-header">
                    <h2><i class="fa-solid fa-question-circle"></i> Posez votre question</h2>
                </div>
                <div class="card-body">
                    <input type="text" id="question-input" placeholder="Votre question sur l'agriculture..." class="form-control" />
                    <button onclick="sendQuestion()" class="btn btn-danger btn-pulse">
                        <i class="fa-solid fa-paper-plane"></i> Envoyer
                    </button>
                    <p class="hbbtv-hint"><i class="fa-solid fa-circle" style="color: #FF0000;"></i> Appuyez sur le bouton rouge pour envoyer</p>
                </div>
            </div>
            <div id="questions-container" class="card card-float">
                <div class="card-header">
                    <h2><i class="fa-solid fa-comments"></i> Questions des spectateurs</h2>
                </div>
                <div class="card-body questions-list" id="questions-list"></div>
            </div>
        </div>
    </div>
    <script src="/static/js/hbbtv_index.js"></script>
</body>
</html>